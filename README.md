# 大米をはたけ(たいまいをはたけ)

## 要件
このゲームでは、開始時点で市場に幾つかの米が出ている。また、その市場の供給量には上限がある。まず、ブローカー(ユーザー)が市場と競合相手の動き、環境(最初はない)を確認して、出荷の準備を行う。準備はブローカーが手持ちのお金(pt)を消費して農家からコメ(ブランドが複数ある)を買い取る。そして、手持ちの米(手札)の中から市場に出す米を選択し、市場に出す。両者の米と市場の流通を集計し、少ないものから順位をきめ市場に流す。その際の買取金額(pt)をユーザーは得る。このサイクルを繰り返し、一定のターン数(年数)が経つか、終了カードが来るまで続け、最終的に相手よりも多くのお金(pt)を稼いだ方の勝利。

## 要素
- ブローカー：ユーザーの立ち位置

- 所持金：ブローカーの手持ちのお金(pt)

- 手札フィールド：ブローカーが持つ米一覧
    - 米の一覧
    - 配置フィールド

- 買い付け：ブローカーが農家からお金(pt)を使って米を買い取る
    - その時の市場の動向で価格が変動

- 市場：買いてとブローカー(ユーザー)が取引を行う
    - それぞれのブランドの個別数に応じて値段が変わる
        - 一番数が多い品種はポイント(価格)が0.5倍
        - 二番目に個数が多い品種はポイント(価格)が1倍
        - それ以外の品種はポイント(価格)が1.5倍

- 供給上限：市場に出回る数の上限
    - ゲーム開始時に設定される(ランダム?)

- 出荷：ブローカーが市場に米を流す

- 出荷準備フィールド：ブローカーが市場に出荷する米を選択する場所
    - 他のブローカーの出荷選択状態は見えない
    - 複数米出荷可能

- 供給過多：市場の供給上限以上に米が出荷された
    - 市場の全てのブランドの価値が下がる

- 消費：ターン終了時に市場の米が卸されたり、買われたりして減少する
    - 消費されるものはランダム(だが、数が多いものが比較的多く消費される。母数からランダムなので)

- 供給過多継続：ターン終了後に消費されても、供給過多が継続した状態
    - 通常の供給過多と同様に米の価値が下がる(買取の際はそのままでいい)

- 環境：一定の場面で発動される環境状態
    - 不作やニュース、政策など米に関わるイベントで値段や流通の変数が変わる

- 米：今回の主役
    - 種類は今回は四種類
        - りょうおもい
        - ほしひかり
        - ゆめごこち
        - つやおうじ

- 古米：買い付けてから年数が経つと米に付与される状態異常
    - 3年で古古古米となり、4年で廃棄(消失)する。** (要相談) **

- 米騒動：ゲーム終了前に発動される
    - 消費が急増し、市場から米が消え去る。その際に農家から買取価格が増加する(?)
    - それと同時に米の需要が増えるので、出荷する米の価値も高くなる
    - それぞれのブローカーのターンが終了すると、米騒動が起きゲーム終了

- NPC
    - 状況などを考慮した判断をするNPCを作成(一旦一体)

## 初動
1. 市場の公開
    - ブランド米それぞれの総数
    - 供給上限
2. 手札(米)の買取り
    - 所持金を消費して買取
3. 出荷準備
    - 手札の米を任意の数選択
    - 相手の出荷選択状態は見えない
4. 出荷・集計
    - 出荷準備の米を市場に出荷
    - 現状の市場の米と出荷された米をそれぞれ集計
    - それぞれのブランド米の総数によって順位付け&値段設定
5. 値段設定
    - 市場の供給上限 > 元の市場の供給数 + 出荷数
        - true
            - 供給過多なので、すべての米の価値が下がる
        - false
            - 何もなし
6. ポイント計算
    - それぞれのブローカーが出荷した米の価値をそれぞれ計算し、金額(pt)を計算、分配
7. 消費
    - 市場の米をランダムに消費
8. 次の年へ

## 機能
### status
- 場面管理

### 市場
- ブランド米の初期設定
- 供給上限の初期設定
- 消費
- 集計
- 値段設定
- 金額計算

### ブローカー情報
- 初期金額設定
- 手札管理

### 米の買取
- 販売米の設定(要相談)
- 買取(複数枚買える、お金が許す限り)

### 出荷準備
- 米選択

### 出荷
- 手札更新

### ブランド米
- 米管理
- 画像はAIを使う?(要相談)

### 環境
- 環境ランダム選択
- 環境カード
    - それぞれの設定

## レイアウト構成

### 画面全体構成
- **画面サイズ**： 1280x720（16:9）または 1024x768（4:3）
- **背景**：テーマは相談

### 画面エリア分割

#### 左側エリア（画面の30%）
- 市場情報
    - 各ブランド米の現在数（×数字）
    - 供給範囲の表示
    - 現在の市場価格
- 環境(効果)表示エリア
    - 現在の環境名表示（豊作、不作など）
    - 効果の説明テキスト

#### 右側エリア（画面の70%）
**上部：ゲーム情報パネル**
- ターン数(年目)表示

**中央部：出荷準備エリア**
- 相手出荷準備フィールド（上段）
    - 裏向きなど見えない形で表示
    - 枚数のみ確認可能
    - 5枚以上は5枚単位でグループ化（奥行き感）

- 中央区切り線

- 自分の出荷準備フィールド（下段）
    - 表向きカードで表示
    - 同じ種類のカードは重ねて表示する（奥行き感）

**下部：手札とポイントエリア**
- 左側には現在取得しているポイント(お金)
- 右側には手札
    - 持っているカードの一覧
        - 上部：ブランド名
        - 中央：米の画像/イラスト
        - 下部：購入価格
    - 同じ種類のカードは重ねて表示する（奥行き感）

### インタラクション要素
  - 手札から出荷準備フィールドへ出す時
    - 手札のまとまっているカードをクリック->ポップアップなどが出てきて枚数を指定->追加ボタンを押すと追加される
  - 同様に出荷準備フィールドをクリックすると手元に戻す枚数を指定->戻すボタンを押すと戻る

## 必要そうなモデル